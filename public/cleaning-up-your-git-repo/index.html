<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>I Am Simme</title>
      <link href="https://fonts.googleapis.com/css?family=Oswald:600&amp;subset=latin-ext" rel="stylesheet">
      <link href="https://iamsim.me/css/master.css" rel="stylesheet">
      <link href="https://iamsim.me/index.xml" rel="alternate" type="application/rss+xml" title="" />
      <link href="https://iamsim.me/index.xml" rel="feed" type="application/rss+xml" title="" />
      <link href="" rel="alternate" type="application/json" title="" />
   </head>
   <body>
      <header class="page-header">
         
            <a href="https://iamsim.me/" class="page-header-logo">I Am Simme</a>
         
         <p>
            A blog about programming, photography and other things I like and don't.
         </p>
      </header>

      <section class="main">


    <article class="post">
      <span class="date">April 23, 2014</span>
      <h1>Cleaning up Your Git Repo</h1>
      <div class="content">
         <p>If you have ever worked in a team with more then one person, on a project managed with Git and this project was run using something akin to <a href="http://nvie.com/posts/a-successful-git-branching-model/">git-flow</a> you have probably seen repos with tons of &ldquo;dead&rdquo; branches. Branches that were used for pull requests or features that has long since been merged.</p>

<p>Isn&rsquo;t that annoying? Why would you need all those branches in your local repository? I don&rsquo;t want them in my repo, that&rsquo;s for sure!</p>

<p>Here are two commands that I run regularly to clean up my local Git repository.</p>

<p><code>$ git remote prune origin</code></p>

<p><code>git branch --merged | grep -vE &quot;release|master|develop&quot; | xargs -n 1 git branch -d</code></p>

<p>Let&rsquo;s walk through them one by one.</p>

<p>The first one is a very simple command that removes all your local &ldquo;remote branches&rdquo; (the ones named <code>origin/foobar</code>) that are no longer on the remote. For example feature branches that have been merged and deleted during a pull request. Of course you can replace <code>origin</code> with what ever remote you want to prune.</p>

<p>The second one is a bit more involved:</p>

<p>First grab all the local branches that have been merged. The man pages has this to say about <code>--merged</code>:</p>

<blockquote>
<p>&ndash;merged is used to find all branches which can be safely deleted, since those branches are fully contained by HEAD.</p>
</blockquote>

<p>Secondly run the list through <code>grep</code> with an inverted regex to remove the branches we want to keep (in my case those are <code>release</code>, <code>master</code> and <code>develop</code>).</p>

<p>Lastly use <code>xargs</code> to run <code>git branch -d</code> for every branch in the list. If you want to verify what branches will be actually removed you can run the command without the <code>xargs</code> part first to just see the list.</p>

<p>Your local git repo should now only contain the branches that you have not yet merged (current feature branches etc) as well as remote branches still in the works. Now go on with your work knowing your repo is a bit lighter!</p>

      </div>
    </article>
      </section>

      <footer class="page-footer">
         <p>
            All content and code on this site is provided under the MIT license.
         </p>
         <nav>
            <ol>
               <li><a href="https://twitter.com/simmelj">@simmelj</a></li>
               <li><a href="https://github.com/simme">GitHub</a></li>
            </ol>
         </nav>
      </footer>
   </body>
</html>

