<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>I Am Simme</title>
      <link href="https://fonts.googleapis.com/css?family=Oswald:600&amp;subset=latin-ext" rel="stylesheet">
      <link href="https://iamsim.me/css/master.css" rel="stylesheet">
      <link href="https://iamsim.me/index.xml" rel="alternate" type="application/rss+xml" title="" />
      <link href="https://iamsim.me/index.xml" rel="feed" type="application/rss+xml" title="" />
      <link href="" rel="alternate" type="application/json" title="" />
   </head>
   <body>
      <header class="page-header">
         
            <a href="https://iamsim.me/" class="page-header-logo">I Am Simme</a>
         
         <p>
            A blog about programming, photography and other things I like and don't.
         </p>
      </header>

      <section class="main">


    <article class="post">
      <span class="date">September 19, 2014</span>
      <h1>Lazy Properties in Swift</h1>
      <div class="content">
         <p>Continuing to use my blog as a reference for myself and a summary of stuff I&rsquo;ve learned about here&rsquo;s a post about Swift!</p>

<p>I&rsquo;ve spent some time now trying to write a little app, and I recently wanted to set a custom <code>dataSource</code> on one of my tableviews. The problem was that I wanted to keep a reference to this dataSource in my table view controller (which I might actually not need since it&rsquo;s always there via the <code>tableView</code> property). <em>But</em>, in Swift you need to initialize all properties in your <code>init()</code> which I couldn&rsquo;t use since I&rsquo;m relying on storyboards, so <code>awakeFromNib()</code> is the correct place to set such stuff up.</p>

<p>I first tried using optionals, ie:</p>

<pre><code>class MyTableView: UITableViewController {
  let dataSource: CustomDataSource?
  
  override func awakeFromNib() {
    dataSource = CustomDataSource()
    tableView.dataSource = dataSource!
  }
}
</code></pre>

<p>The problem with this approach is that anytime I want to reference my dataSource I have to unwrap it using <code>!</code>. Which feels stupid and clumsy.</p>

<p>Spewing out some frustration on Twitter gave me <a href="https://twitter.com/maciekish/status/512740889068707842">a hint</a> on how to <em>properly</em> solve this.</p>

<p>So after reading up on <code>lazy</code> my tableview controller now looks like this:</p>

<pre><code>class MyTableView: UITableViewController {
  lazy var dataSource: FormalTableViewDataSource = {
    return CustomDataSource()
  }()
  
  override func awakeFromNib() {
    tableView.dataSource = dataSource
  }
}
</code></pre>

<p>This also works when you have a property that&rsquo;s an object who&rsquo;s constructor needs an object that you create after <code>init()</code> for example.</p>

<p>I&rsquo;ll be super greatful if anyone tells me I&rsquo;m doing it wrong :)</p>

      </div>
    </article>
      </section>

      <footer class="page-footer">
         <p>
            All content and code on this site is provided under the MIT license.
         </p>
         <nav>
            <ol>
               <li><a href="https://twitter.com/simmelj">@simmelj</a></li>
               <li><a href="https://github.com/simme">GitHub</a></li>
            </ol>
         </nav>
      </footer>
   </body>
</html>

